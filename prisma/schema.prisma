generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider  = "postgresql"
  url       = env("DATABASE_URL")
  directUrl = env("DIRECT_URL")
}

model Apartment {
  id            String   @id @default(uuid())
  city          String
  price         Float
  rooms         Float
  description   String?
  address       String?
  phone_number  String   // מספר המשכיר/מתווך
  
  // שדות חדשים למדיה ויומן
  images        String[] // מערך של URLS
  video_url     String?  // לינק לסרטון אחד מרכזי
  calendar_link String?  // לינק ל-Cal.com או Google Calendar
  
  embedding     Unsupported("vector(768)")?
  createdAt     DateTime @default(now())

  @@map("apartments")
}

model User {
  phone         String   @id
  current_step  String   @default("IDLE")
  metadata      Json?    // כאן נשמור את ה-apartment_id הנוכחי בשיחה
  role          String   @default("tenant") // 'landlord' or 'tenant'
  createdAt     DateTime @default(now())

  @@map("users")
}